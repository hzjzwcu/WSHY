# http2.0 特性

> http2.0是一种**安全高效**的下一代http传输协议。**安全**是因为http2.0建立在**https协议**的基础上，**高效**是因为它是通过**二进制分帧**来进行数据传输与 1.x 协议的比较

## http/1.x 的缺点

- 单向请求，只能由客户端发起
- 数据未压缩，导致数据的传输量大
- 大量重复的头部信息
- 一次只允许在一个TCP连接上发起一个请求，为避免拥塞，起初会限制连接的最大速度，没有丢包的话就逐渐提高速度。这种调谐被称为 **TCP 慢启动**，慢启动对于短期连接的性能差，无法完整发挥带宽性能。这也是为何一些站点会有多个静态资源 CDN 域名的原因之一，目的就是变相的解决浏览器针对同一域名的请求限制

> https://http2.akamai.com/demo 这是一个 demo 实例，同时请求 379 张图片，从 `Load time` 的对比可以看出 HTTP/2 在速度上的优势

## 多路复用

HTTP2.0在应用层和传输层之间增加了一个二进制分帧层，将信息流划分为多个二进制编码的帧，并通过采取多帧并行模式在同一个TCP连接上，允许多重双向交换的**“请求-响应”**消息

单连接多资源的方式，减少服务端的链接压力，内存占用更少，连接吞吐量更大

由于 TCP 连接的减少而使网络拥塞状况得以改善，同时**慢启动**时间的减少，使拥塞和丢包恢复速度更快

## 头部压缩

在传统 HTTP/1 中，请求和响应都是由「**状态行**、**请求 / 响应头部**、**消息主体**」三部分组成。随着web功能日渐复杂，每个页面产生的请求数也越来越多，这种情况下，每次请求都要携带Cookie等内容，对传输资源消耗极大。

HTTP2.0 对请求头部的压缩比高达`71%`，同时还能**避免重复传输**，在实际应用中能够显著降低延迟

## 请求优先级

在 HTTP2.0中，能够依据信息优先级，让更重要的请求优先完成。**HTTP2.0里的每个请求都需要设置优先级和依赖关系，优先级高的信息流会被服务端优先处理**。

## 服务端推送

当用户的浏览器和服务器在建立连接后，**服务器会主动将一些资源推送给浏览器并缓存起来**，这样当浏览器接下来请求这些资源时，就无需再回到服务器拉去，直接从缓存中读取即可。
