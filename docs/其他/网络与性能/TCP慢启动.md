# TCP的慢启动

## 慢启动

TCP建立连接后，每次发送的报文数不固定，从1开始，逐次倍增，1,2,4,8这样增加，这个过程叫**慢启动**，当前每次发送的报文数被称为**拥塞窗口cwnd**

## 门限ssthreshold

慢启动达到门限后，cwnd会变成每次增加1

## 超时重传

发送的报文会进入缓冲区，如果客户端超时没有确认，就会重发该报文，如果确认就从缓冲区删除，当数量越来越多，肯定会超出带宽限制，导致超时，此时就会让慢启动门限改为当前每次发送的一半，即ssthreshold=cwnd/2

然后重新开始慢启动，重启的cwnd初始化有两种情况

- 如果超时时间内所有报文都超时，cwnd=1
- 如果只是部分报文超时，则cwnd=原来的cwnd/4，被称为**快恢复**

> 超时时间是根据每次报文的往返时间动态计算的


![image.png](./TCP%E6%85%A2%E5%90%AF%E5%8A%A8.assets/1638808791348065758.png)

